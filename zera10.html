<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>صفحة مقسمة</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-position: center;
        background-image: url("./photo_2024-06-28_02-58-02.jpg");
        background-repeat: no-repeat;
        background-size: cover;
      }
      .overly {
        background: #0c1c2cc0;
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 1;
      }
      #topSection {
        text-align: center;
        color: #fff;
        font-size: 34px;
        padding-top: 20px;
        z-index: 900;
        position: absolute;
        left: 50%;
        transform: translate(-50%, 0%);
      }
      #banner {
        position: fixed;
        top: 100px; /* ارتفاع البانر من الأعلى بـ 100 بكسل */
        left: 50%;
        transform: translateX(-50%);
        font-size: 24px;
        color: #ff0000;
        z-index: 999; /* لضمان ظهوره فوق أي شيء آخر */
      }
      #bottomSection {
        text-align: center;
        padding: -2px;
      }
    </style>
  </head>
  <body>
    <div class="overly"></div>
    <div id="topSection">تم تفعل هاك</div>
    <div id="banner">
      <span id="hours">00</span>:<span id="minutes">10</span>:<span id="seconds"
        >00</span
      >
    </div>
    <div id="message" style="display: none">
      <div id="banner">الوقت انتهى</div>
      <div id="alert">لقد انتهى الوقت</div>
    </div>

    <script>
      const expectedCodes10 = [
        "K8D5F-Z7G1P-0L3N4-V6W2J",
        "M3Q7E-A5K9H-4Z6Y2-P1F8R",
        "J9R2M-V3W8K-1L5G7-P4F6E",
        "Z5K1F-8G2P3-6M4J7-V0W9L",
        "L6P3N-1F9K8-7J0R2-V4W5E",
        "F4G7E-K3Z5L-8M2P1-J0R9V",
        "W2L0J-9R8P5-1F6G3-K7V4M",
        "N3V9P-6M0K7-2J4F1-R8G5L",
        "G8K1R-4F7M9-2L6J3-P0W5N",
        "R0M6L-5P2J1-8K3V4-F7G9E",
      ];

      // الدالة لتحميل العداد والكود من localStorage
      function loadTimer() {
        const savedData = localStorage.getItem("timerData");
        if (savedData) {
          return JSON.parse(savedData);
        }
        return { hours: 0, minutes: 10, seconds: 0, userCode: "" };
      }

      // الدالة لحفظ العداد والكود إلى localStorage
      function saveTimer(hours, minutes, seconds, userCode) {
        localStorage.setItem(
          "timerData",
          JSON.stringify({ hours, minutes, seconds, userCode })
        );
      }

      (function () {
        const hoursElement = document.getElementById("hours");
        const minutesElement = document.getElementById("minutes");
        const secondsElement = document.getElementById("seconds");

        const userCode = localStorage.getItem("userCode");;
        let { hours, minutes, seconds, userCode: storedCode } = loadTimer();

        // إذا كان الكود المخزن مختلف، إعادة تعيين العداد وتحديث localStorage
        if (storedCode !== userCode) {
          hours = 0;
          minutes = 10;
          seconds = 0;
          saveTimer(hours, minutes, seconds, userCode);
        }

        let timerInterval;

        function updateDisplay() {
          hoursElement.innerText = hours.toString().padStart(2, "0");
          minutesElement.innerText = minutes.toString().padStart(2, "0");
          secondsElement.innerText = seconds.toString().padStart(2, "0");
        }

        function countdown() {
          if (hours === 0 && minutes === 0 && seconds === 0) {
            clearInterval(timerInterval);
            document.getElementById("message").style.display = "block";
            document.getElementById("banner").innerText = "الوقت انتهى";
            document.getElementById("alert").innerText = "لقد انتهى الوقت";
          } else {
            if (seconds > 0) {
              seconds--;
            } else {
              if (minutes > 0) {
                minutes--;
                seconds = 59;
              } else if (hours > 0) {
                hours--;
                minutes = 59;
                seconds = 59;
              }
            }
            updateDisplay();
            saveTimer(hours, minutes, seconds, userCode);
          }
        }

        // تشغيل العداد عند تحميل الصفحة إذا لم يكن منتهي
        if (hours !== 0 || minutes !== 0 || seconds !== 0) {
          timerInterval = setInterval(countdown, 1000);
        } else {
          document.getElementById("message").style.display = "block";
          document.getElementById("banner").innerText = "الوقت انتهى";
          document.getElementById("alert").innerText = "لقد انتهى الوقت";
        }

        updateDisplay();
      })();
    </script>
  </body>
</html>
